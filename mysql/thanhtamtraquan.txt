use thanhtamtraquan;
CREATE TABLE sanphams (
  id INT AUTO_INCREMENT PRIMARY KEY,
  tenSanPham VARCHAR(255) NOT NULL,
  gia DECIMAL(12,2) NOT NULL,
  khoiLuongHop VARCHAR(64) NOT NULL,
  soLuong INT,
  xuatXu VARCHAR(255) NOT NULL,
  moTa TEXT,
  huongVi TEXT NULL,
  congDung TEXT NULL,
  cachPha TEXT NULL,
  anh VARCHAR(255),             -- đường dẫn tương đối: images/product1re.jpg
  trangThai ENUM('ACTIVE','HIDE') DEFAULT 'ACTIVE',
  ngayTao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE amtras (
  id INT AUTO_INCREMENT PRIMARY KEY,
  tenAmTra VARCHAR(255) NOT NULL,
  gia DECIMAL(12,2) NOT NULL,
  soLuong INT,
  xuatXu VARCHAR(255) NOT NULL,
  moTa TEXT,
  chatLieu TEXT NULL,
  thietKe TEXT NULL,
  cachSuDung TEXT NULL,
  anh VARCHAR(255),             -- đường dẫn tương đối: images/product1re.jpg
  trangThai ENUM('ACTIVE','HIDE') DEFAULT 'ACTIVE',
  ngayTao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE nguoidungs (
  id INT AUTO_INCREMENT PRIMARY KEY,
  hoTen VARCHAR(255),
  gioiTinh TINYINT,
  ngaySinh DATE, 
  diaChi VARCHAR(255),
  SDT VARCHAR(20),
  email VARCHAR(255) UNIQUE,
  taiKhoan VARCHAR(100) UNIQUE,
  matKhau VARCHAR(255),
  role ENUM('ADMIN','USER') DEFAULT 'USER',
  ngayTao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE anhnens (
  id INT AUTO_INCREMENT PRIMARY KEY,
  duongDan VARCHAR(255) NOT NULL,
  trangThai ENUM('ACTIVE', 'HIDE') DEFAULT 'ACTIVE',
  ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Bảng Address
CREATE TABLE address_contact (
    id INT AUTO_INCREMENT PRIMARY KEY,
    noiDung TEXT NOT NULL,
    trangThai ENUM('ACTIVE', 'HIDE') DEFAULT 'ACTIVE',
    ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Bảng Email
CREATE TABLE email_contact (
    id INT AUTO_INCREMENT PRIMARY KEY,
    noiDung VARCHAR(255) NOT NULL,
    trangThai ENUM('ACTIVE', 'HIDE') DEFAULT 'ACTIVE',
    ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Bảng Phone
CREATE TABLE phone_contact (
    id INT AUTO_INCREMENT PRIMARY KEY,
    noiDung VARCHAR(50) NOT NULL,
    trangThai ENUM('ACTIVE', 'HIDE') DEFAULT 'ACTIVE',
    ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE rollup_log (
  date DATE PRIMARY KEY
);

CREATE TABLE truycap_logs (
  id INT AUTO_INCREMENT PRIMARY KEY,
  ip_address VARCHAR(45),
  visited_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE luottruycap_ngay (
  date DATE PRIMARY KEY,
  total INT DEFAULT 0
);

CREATE TABLE taikhoan_thanhtoan (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nganHang VARCHAR(100) NOT NULL,
  soTaiKhoan VARCHAR(50) NOT NULL,
  chuTaiKhoan VARCHAR(255) NOT NULL,
  anhQR VARCHAR(255) NOT NULL,
  trangThai ENUM('ACTIVE','HIDE') DEFAULT 'ACTIVE',
  ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE donthanhtoan (
  id INT AUTO_INCREMENT PRIMARY KEY,
  hoTen VARCHAR(100) NOT NULL,
  sdt VARCHAR(20) NOT NULL,
  email VARCHAR(100),
  diaChi TEXT NOT NULL,
  tenSanPham TEXT NOT NULL,
  soLuong TEXT NOT NULL,
  thongTinCK VARCHAR(20) NOT NULL,
  soTien DECIMAL(12,0) NOT NULL,
  trangThai ENUM('choXacNhan','daXacNhan','huyXacNhan')
            DEFAULT 'choXacNhan',
  ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE nhapkho (
    id INT AUTO_INCREMENT PRIMARY KEY,
    sanPhamId INT NOT NULL,
    soLuong INT NOT NULL,
    loai ENUM('NHAP', 'DIEU_CHINH', 'TRA_HANG') DEFAULT 'NHAP',
    ghiChu VARCHAR(255),
    nguoiThucHien INT NOT NULL,
    ngayTao DATETIME DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (sanPhamId) REFERENCES sanphams(id),
    FOREIGN KEY (nguoiThucHien) REFERENCES nguoidungs(id)
);